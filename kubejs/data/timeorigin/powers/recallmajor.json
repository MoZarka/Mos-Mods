{
    "hidden": true,
    "type": "origins:active_self",
    "name": "Temporal Recall",
    "description": "Using your time travel abilities, you can recall your physical form back to a previous state and location. Using primary key gives 2 powers:\n\nMinor Recall: Pressing Primary Key with a clock in your Offhand causes you to recall about 10 seconds into the past, returning your health, hunger, and position.\n\nMajor Recall: Pressing Primary Key with a clock in your Main Hand causes you to consume the clock and return to the location of your last death, or if you have not died in this world, you return to the world spawn.",
    "cooldown": 1200,
    "key": {
        "key": "primary",
        "continuous": true
    },
    "hud_render": {
        "should_render": true,
        "sprite_location": "origins:textures/gui/community/spiderkolo/resource_bar_03.png",
        "bar_index": 9
    },
    "entity_action": {
        "actions": [
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "scoreboard players operation $timeshfttempid timeshftid = @s timeshftid"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "tag @e[distance=0..5,type=!minecraft:armor_stand,type=!minecraft:item_frame,type=!minecraft:end_crystal] add readyfortransport"
            },
            {
                "type": "origins:if_else",
                "condition": {
                    "type": "origins:dimension",
                    "inverted": false,
                    "dimension": "minecraft:overworld"
                },
                "if_action": {
                    "type": "origins:execute_command",
                    "permission_level": 4,
                    "command": "/scoreboard players set @s timeshftdimens7 0"
                }
            },
            {
                "type": "origins:if_else",
                "condition": {
                    "type": "origins:dimension",
                    "inverted": false,
                    "dimension": "minecraft:the_nether"
                },
                "if_action": {
                    "type": "origins:execute_command",
                    "permission_level": 4,
                    "command": "/scoreboard players set @s timeshftdimens7 1"
                }
            },
            {
                "type": "origins:if_else",
                "condition": {
                    "type": "origins:dimension",
                    "inverted": false,
                    "dimension": "minecraft:the_overworld"
                },
                "if_action": {
                    "type": "origins:execute_command",
                    "permission_level": 4,
                    "command": "/scoreboard players set @s timeshftdimens7 2"
                }
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "/summon armor_stand ~ ~ ~ {NoGravity:1b,Silent:1b,Invulnerable:1b,Marker:1b,Invisible:1b,NoBasePlate:1b,PersistenceRequired:1b,Tags:[\"waypointstand\"]}"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "/scoreboard players operation @e[type=minecraft:armor_stand,limit=1,tag=waypointstand,sort=nearest] timeshftid = @p[sort=nearest,limit=1] timeshftid"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "/scoreboard players operation $timeshfttempid timeshftid = @s timeshftid"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "/execute as @e[type=armor_stand,tag=waypointstand,sort=nearest,limit=1] run forceload add ~ ~"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "/execute as @e[type=minecraft:armor_stand,tag=waypointstand,tag=safestand] if score @s timeshftid = $timeshfttempid timeshftid run teleport @e[tag=readyfortransport] @s"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "/execute as @e[type=minecraft:armor_stand,tag=waypointstand,tag=safestand] if score @s timeshftid = $timeshfttempid timeshftid run kill @s"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "/execute as @e[type=minecraft:armor_stand,tag=waypointstand,tag=!safestand] if score @s timeshftid = $timeshfttempid timeshftid run tag @s add safestand"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "/forceload remove ~ ~"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "/execute unless score @s timeshftdimens6 = @s timeshftdimens7 run spreadplayers ~ ~ 1000 1000 under 100 true @e[tag=readyfortransport]"
            },
            {
                "type": "origins:and",
                "actions": [
                    {
                        "type": "origins:execute_command",
                        "permission_level": 4,
                        "command": "execute store result score @s timeshftpos0.1.1 run data get entity @s Pos[0] 100"
                    },
                    {
                        "type": "origins:execute_command",
                        "permission_level": 4,
                        "command": "execute store result score @s timeshftpos1.1.1 run data get entity @s Pos[1] 100"
                    },
                    {
                        "type": "origins:execute_command",
                        "permission_level": 4,
                        "command": "execute store result score @s timeshftpos2.1.1 run data get entity @s Pos[2] 100"
                    },
                    {
                        "type": "origins:execute_command",
                        "permission_level": 4,
                        "command": "execute store result score @s timeshftpos0.1.2 run data get entity @s Pos[0] 100"
                    },
                    {
                        "type": "origins:execute_command",
                        "permission_level": 4,
                        "command": "execute store result score @s timeshftpos1.1.2 run data get entity @s Pos[1] 100"
                    },
                    {
                        "type": "origins:execute_command",
                        "permission_level": 4,
                        "command": "execute store result score @s timeshftpos2.1.2 run data get entity @s Pos[2] 100"
                    },
                    {
                        "type": "origins:execute_command",
                        "permission_level": 4,
                        "command": "execute store result score @s timeshftpos0.1.3 run data get entity @s Pos[0] 100"
                    },
                    {
                        "type": "origins:execute_command",
                        "permission_level": 4,
                        "command": "execute store result score @s timeshftpos1.1.3 run data get entity @s Pos[1] 100"
                    },
                    {
                        "type": "origins:execute_command",
                        "permission_level": 4,
                        "command": "execute store result score @s timeshftpos2.1.3 run data get entity @s Pos[2] 100"
                    },
                    {
                        "type": "origins:execute_command",
                        "permission_level": 4,
                        "command": "execute store result score @s timeshftpos0.1.4 run data get entity @s Pos[0] 100"
                    },
                    {
                        "type": "origins:execute_command",
                        "permission_level": 4,
                        "command": "execute store result score @s timeshftpos1.1.4 run data get entity @s Pos[1] 100"
                    },
                    {
                        "type": "origins:execute_command",
                        "permission_level": 4,
                        "command": "execute store result score @s timeshftpos2.1.4 run data get entity @s Pos[2] 100"
                    },
                    {
                        "type": "origins:execute_command",
                        "permission_level": 4,
                        "command": "execute store result score @s timeshftpos0.1.5 run data get entity @s Pos[0] 100"
                    },
                    {
                        "type": "origins:execute_command",
                        "permission_level": 4,
                        "command": "execute store result score @s timeshftpos1.1.5 run data get entity @s Pos[1] 100"
                    },
                    {
                        "type": "origins:execute_command",
                        "permission_level": 4,
                        "command": "execute store result score @s timeshftpos2.1.5 run data get entity @s Pos[2] 100"
                    }
                ]
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "tag @e remove readyfortransport"
            },
            {
                "type": "origins:change_resource",
                "resource": "timeorigin:recallminorfallpreventresource",
                "change": 10
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "effect @s clear"
            },
            {
                "type": "origins:change_resource",
                "resource": "timeorigin:timefatigueresource",
                "change": 100
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "/particle enchant ~ ~ ~ .375 .75 .375 1 1250 force"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "summon area_effect_cloud ~ ~ ~ {Particle:\"enchant\",Radius:5f,Duration:300,RadiusPerTick:-0.0166666f}"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "playsound block.end_portal.spawn master @s ~ ~ ~ 2"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "playsound block.end_portal.spawn master @s ~ ~ ~ 2"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "playsound block.end_portal.spawn master @s ~ ~ ~ 2"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "playsound block.end_portal.spawn master @s ~ ~ ~ 2"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "playsound block.end_portal.spawn master @s ~ ~ ~ 2"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "playsound block.end_portal.spawn master @s ~ ~ ~ 2"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "playsound block.end_portal.spawn master @s ~ ~ ~ 2"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "playsound block.end_portal.spawn master @s ~ ~ ~ 2"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "playsound block.end_portal.spawn master @s ~ ~ ~ 2"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "playsound block.end_portal.spawn master @s ~ ~ ~ 2"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "playsound block.beacon.deactivate master @s ~ ~ ~ 2"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "playsound block.beacon.deactivate master @s ~ ~ ~ 2"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "playsound block.beacon.deactivate master @s ~ ~ ~ 2"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "playsound block.beacon.deactivate master @s ~ ~ ~ 2"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "playsound block.beacon.deactivate master @s ~ ~ ~ 2"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "playsound block.beacon.deactivate master @s ~ ~ ~ 2"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "playsound block.beacon.deactivate master @s ~ ~ ~ 2"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "playsound block.beacon.deactivate master @s ~ ~ ~ 2"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "playsound block.beacon.deactivate master @s ~ ~ ~ 2"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "playsound block.beacon.deactivate master @s ~ ~ ~ 2"
            },
            {
                "type": "origins:execute_command",
                "permission_level": 4,
                "command": "tellraw @s \"Temporal Warp Complete. New Waypoint Set at Departure Coordinates.\""
            }
        ],
        "type": "origins:and"
    },
    "condition": {
        "type": "origins:and",
        "inverted": false,
        "conditions": [
            {
                "type": "origins:equipped_item",
                "inverted": false,
                "equipment_slot": "mainhand",
                "item_condition": {
                    "type": "origins:ingredient",
                    "inverted": false,
                    "ingredient": {
                        "item": "minecraft:clock"
                    }
                }
            },
            {
                "type": "origins:equipped_item",
                "inverted": false,
                "equipment_slot": "offhand",
                "item_condition": {
                    "type": "origins:ingredient",
                    "inverted": false,
                    "ingredient": {
                        "item": "minecraft:clock"
                    }
                }
            },
            {
                "type": "origins:resource",
                "inverted": false,
                "comparison": "==",
                "resource": "timeorigin:recallmajorprimeresource",
                "compare_to": 60
            }
        ]
    }
}